name: Push Notifications

on:
  push:
    branches: [main]

jobs:
  notify:
    runs-on: self-hosted
    steps:
      - name: Notify API
        env:
          API_WEBHOOK_KEY: ${{ secrets.API_WEBHOOK_KEY }}
        run: |
          curl -sf -X POST "https://api.zykeresources.com/webhook/github/push" \
            -H "Content-Type: application/json" \
            -H "X-Webhook-Key: $API_WEBHOOK_KEY" \
            -d '${{ toJson(github.event) }}'
